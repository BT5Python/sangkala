<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Upload ke Google Drive</title>
<style>
  body {
    background:#000;
    color:#00ff00;
    font-family: "Courier New", monospace;
    text-align:center;
    padding:40px;
  }

  h2 {
    letter-spacing:2px;
    text-shadow:0 0 10px #00ff00;
  }

  .upload-box {
    border:1px solid #00ff00;
    display:inline-block;
    padding:25px 40px;
    margin-top:20px;
    border-radius:10px;
    background:rgba(0,255,0,0.05);
  }

  input[type=file]{
    margin:20px;
    color:#0f0;
  }

  button {
    padding:12px 28px;
    font-size:18px;
    background:#00ff00;
    color:#000;
    border:0;
    cursor:pointer;
    font-weight:bold;
    border-radius:5px;
  }

  /* Progress bar */
  #progressContainer {
    width:80%;
    height:18px;
    border:1px solid #00ff00;
    margin:20px auto;
    display:none;
  }

  #progressBar {
    height:100%;
    width:0%;
    background:#00ff00;
    box-shadow:0 0 10px #00ff00;
  }

  #status {
    margin-top:15px;
    font-size:18px;
  }
</style>
</head>
<body>

<h2>UPLOAD KE GOOGLE DRIVE</h2>

<div class="upload-box">
  <input type="file" id="fileInput">
  <br>
  <button onclick="upload()">UPLOAD</button>

  <div id="progressContainer">
    <div id="progressBar"></div>
  </div>

  <p id="status"></p>
</div>

<script>
const WEBAPP_URL = "PASTE_WEB_APP_URL_DI_SINI"; // ganti di sini

async function upload(){
  const file = document.getElementById("fileInput").files[0];
  if(!file) return alert("Pilih file dulu!");

  const reader = new FileReader();

  reader.onloadend = async () => {
    const base64 = reader.result.split(",")[1];

    // Munculkan progress bar
    document.getElementById("progressContainer").style.display = "block";
    document.getElementById("progressBar").style.width = "0%";
    document.getElementById("status").innerText = "Menyiapkan upload...";

    // Progress bar animasi loading (visual doang)
    animateProgressBar();

    const form = new URLSearchParams();
    form.append("name", file.name);
    form.append("type", file.type);
    form.append("file", base64);

    const res = await fetch(WEBAPP_URL, { method: "POST", body: form });
    const result = await res.json();

    if(result.status === "success"){
      document.getElementById("status").innerHTML =
        "✔ Upload selesai: <a href='" + result.fileUrl + "' target='_blank' style='color:#0f0'>Buka File</a>";
      document.getElementById("progressBar").style.width = "100%";
    } else {
      document.getElementById("status").innerText = "❌ Error: " + result.message;
      document.getElementById("progressBar").style.background = "red";
    }
  };

  reader.readAsDataURL(file);
}

// Animasi progress bar manual (biar keren)
function animateProgressBar(){
  let width = 0;
  const bar = document.getElementById("progressBar");

  const interval = setInterval(() => {
    if (width >= 90) {  // Stop di 90% sampai upload selesai beneran
      clearInterval(interval);
    } else {
      width += 2;
      bar.style.width = width + "%";
    }
  }, 80);
}
</script>

</body>
</html>

<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<title>Upload ke Google Drive</title>

<style>
  body{
    background:#000;
    color:#fff;
    font-family:Arial;
    padding:20px;
  }
  .card{
    max-width:500px;
    margin:auto;
    background:#111;
    padding:20px;
    border-radius:10px;
    border:1px solid #222;
  }
  button, input{
    padding:10px;
    border-radius:6px;
    border:none;
    margin-top:10px;
  }
  input{
    background:#222;
    color:#fff;
    width:100%;
  }
  button{
    background:#1db954;
    color:#000;
    font-weight:bold;
    width:100%;
    cursor:pointer;
  }
</style>
</head>
<body>

<div class="card">
  <h2>Upload File ke Google Drive</h2>

  <!-- FORM TANPA FETCH â€” 100% WORK -->
  <form id="uploadForm" method="POST" target="hiddenFrame">
    <input type="hidden" id="file64" name="file">
    <input type="hidden" id="filename" name="filename">

    <input type="file" id="theFile" required>
    <button type="submit">UPLOAD</button>
  </form>

  <p id="status"></p>

  <!-- Iframe untuk menampung respon -->
  <iframe name="hiddenFrame" style="display:none;"></iframe>
</div>

<script>
const WEBAPP_URL = "https://script.google.com/macros/s/AKfycbzRu7J0zWHlPQ0ZxkJflM5v52PVoGNrVhanbu1eSUENuBNvzsawU02cwTGs5_dXSBPb8A/exec";   // GANTI !!

// SET action form
document.getElementById("uploadForm").action = WEBAPP_URL;

document.getElementById("uploadForm").onsubmit = function(e){
  const file = document.getElementById("theFile").files[0];
  if(!file){
    alert("Pilih file dulu.");
    return false;
  }

  const reader = new FileReader();

  reader.onloadend = () => {
    const base64 = reader.result.split(",")[1];

    document.getElementById("file64").value = base64;
    document.getElementById("filename").value = file.name;

    document.getElementById("status").innerText = "Mengupload...";
  };

  reader.readAsDataURL(file);
};
</script>

</body>
</html>
